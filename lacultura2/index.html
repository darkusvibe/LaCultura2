<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lacultura ‚Äî Kenyan Culture</title>

  <!-- Main CSS -->
  <link rel="stylesheet" href="style.css">

  <!-- Font Awesome (free CDN for icons) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
 <!-- Cinzel Decorative for title & headers -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&display=swap" rel="stylesheet">
  <!-- Poppins for body text -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">
  <!-- Small inline script to reduce theme flash -->
  <script>
    try {
      if (localStorage.getItem('lacultura-theme') === 'light') document.documentElement.classList.add('light-mode');
    } catch(e) {}
  </script>
  
  <script
  src="https://app.livechatai.com/embed.js"
  data-id="cmfioj2nr0001if04ln54w06x"
  async defer>
</script>
</head>
<body>
  <!-- SIDEBAR -->
  <aside id="sidebar" aria-label="Main navigation">
    <div class="brand">
      <div class="brand-icon">üåç</div>
      <div class="brand-title">LACULTURA</div>
    </div>

    <!-- decorative inline SVG patterns (behind content) -->
    <svg class="sidebar-pattern" viewBox="0 0 200 200" aria-hidden="true">
      <defs>
        <g id="tri">
          <polygon points="10,190 100,10 190,190" fill="#FF7F00" opacity="0.06"></polygon>
        </g>
      </defs>
      <use href="#tri" x="0" y="0"></use>
      <use href="#tri" x="0" y="0" transform="translate(0,60) scale(0.6)"></use>
    </svg>

    <nav>
      <a href="#hero"><i class="fas fa-house"></i><span>Home</span></a>
      <a href="#stories"><i class="fas fa-book-open"></i><span>Stories</span></a>
      <a href="#attire"><i class="fas fa-shirt"></i><span>Attire</span></a>
      <a href="#videos"><i class="fas fa-video"></i><span>Videos</span></a>
      <a href="#games"><i class="fas fa-gamepad"></i><span>Games</span></a>
      <a href="#team"><i class="fas fa-users"></i><span>Team</span></a>
      <a href="#donate"><i class="fas fa-hand-holding-heart"></i><span>Support</span></a>
    </nav>

    <div class="sidebar-footer">
      <button id="sidebar-logout" class="ghost">Log out</button>
    </div>
  </aside>

  <!-- MAIN -->
  <div id="app">
    <!-- TOPBAR -->
    <header id="topbar">
      <div class="left">
        <button id="burger" class="icon-btn" aria-label="Open menu"><i class="fas fa-bars"></i></button>
        <div class="small-brand">Lacultura</div>
      </div>

      <div class="right">
        <div id="profile-area" class="profile-area">
          <button id="login-open" class="btn"> <i class="fas fa-user"></i> <span id="profile-name">Login</span></button>
        </div>

        <button id="theme-toggle" class="icon-btn" aria-label="Toggle theme">
          <i class="fas fa-moon"></i>
        </button>
      </div>
    </header>

    <!-- CONTENT -->
    <main id="main-content">
      <!-- HERO: slideshow with inline SVG decorative divider -->
      <section id="hero" class="hero">
        <div class="slideshow">
          <div class="slide active" style="background-image:url('images/maasai.png')">
            <div class="caption"><strong>Maasai Warriors</strong><span>‚Äî Resilience, beadwork & ceremonies</span></div>
          </div>
          <div class="slide" style="background-image:url('images/swahili.jpg')">
            <div class="caption"><strong>Swahili Coast</strong><span>‚Äî History, dhow culture, coral towns</span></div>
          </div>
          <div class="slide" style="background-image:url('images/kikuyu.jpg')">
            <div class="caption"><strong>Kikuyu Origins</strong><span>‚Äî Gikuyu & Mumbi</span></div>
          </div>
        </div>

        <div class="slideshow-controls">
          <button id="prev-slide" class="icon-btn"><i class="fas fa-chevron-left"></i></button>
          <button id="next-slide" class="icon-btn"><i class="fas fa-chevron-right"></i></button>
        </div>

        <!-- zigzag divider (inline svg) -->
        <svg class="divider zigzag" viewBox="0 0 100 20" preserveAspectRatio="none" aria-hidden="true">
          <polygon points="0,20 12.5,0 25,20 37.5,0 50,20 62.5,0 75,20 87.5,0 100,20" />
        </svg>
      </section>

      <!-- STORIES -->
      <section id="stories" class="section">
        <header class="section-head">
          <h2>Stories</h2>
          <p>Legends and tales from Kenya‚Äôs communities ‚Äî tap the speaker to listen (AI narration).</p>
        </header>

        <div class="grid">
          <article class="card story">
            <h3>The Maasai and the Cattle</h3>
            <p id="maasai-full">
              Long ago, when the world was young, the Maasai say Enkai ‚Äî the Creator ‚Äî sent down a rope of light
              from the heavens and dropped cattle upon the earth. The people who gathered them learned the ways of
              pastoral life and promised to tend the cattle with reverence. Cattle were life: milk to drink, blood for
              rites, hides for shelter. Their songs, their rites, their identity were braided around the animals.
              Over time, the rope was severed; the continuous blessing ceased. Still, the Maasai hold that the
              Creator entrusted cattle as sacred, and that belief shaped their customs, warrior training, and the
              ceremonies passed from elder to youth. Today the moran (warriors) still sing the jump of welcome,
              the beadwork tells family stories, and the cattle remain woven into every important day.
            </p>
            <div class="card-actions">
              <button class="btn narrate" data-text-id="maasai-full"><i class="fas fa-headphones"></i> Narrate</button>
            </div>
          </article>

          <article class="card story">
            <h3>Gikuyu & Mumbi (Kikuyu)</h3>
            <p id="kikuyu-full">
              On the slopes of Mount Kenya, Ngai created the first man and woman: Gikuyu and Mumbi. They were given the
              land, the tools, and the blessings to raise a people. Mumbi bore daughters who became the mothers of the
              Kikuyu clans; through them the community grew. The Kikuyu hold the land sacred, and ancestral shrines
              mark the ties between family and earth. Their stories teach stewardship, respect for elders, and the
              close bond between people and crops in the highlands.
            </p>
            <div class="card-actions">
              <button class="btn narrate" data-text-id="kikuyu-full"><i class="fas fa-headphones"></i> Narrate</button>
            </div>
          </article>
        </div>
      </section>

    <!-- Attire -->
<section id="attire" class="card-grid">
  <h2>üëó Traditional Attire</h2>

  <div class="card attire-card">
    <img src="images/maasai.jpg" alt="Maasai Shuka"/>
    <h3>Maasai Shuka</h3>
    <p>Iconic red shuka worn by Maasai warriors and elders.</p>
    <button class="learn-more">Learn More</button>
    <button class="buy-now">Buy Now</button>
    <div class="details">
      <p>The Maasai shuka is a thick, red cloth often checkered, symbolizing strength and identity. 
      Traditionally, red is believed to scare away lions. Today, shukas are also worn in ceremonies 
      and have become a global fashion statement.</p>
    </div>
  </div>

  <div class="card attire-card">
    <img src="images/kikuyu.jpg" alt="Kikuyu Garments"/>
    <h3>Kikuyu Garments</h3>
    <p>Made from animal skins, decorated with cowrie shells.</p>
    <button class="learn-more">Learn More</button>
    <button class="buy-now">Buy Now</button>
    <div class="details">
      <p>Kikuyu traditional attire reflects their agrarian lifestyle, with garments often made 
      from goat skins and enhanced with beadwork. Cowrie shells symbolized wealth and beauty.</p>
    </div>
  </div>

  <div class="card attire-card">
    <img src="images/swahili.jpg" alt="Swahili Kanzu"/>
    <h3>Swahili Kanzu</h3>
    <p>A long white robe worn by Swahili men, often during ceremonies.</p>
    <button class="learn-more">Learn More</button>
    <button class="buy-now">Buy Now</button>
    <div class="details">
      <p>The Kanzu reflects Swahili Islamic culture, commonly paired with a cap known as "kofia". 
      It is worn during weddings, Eid, and community gatherings.</p>
    </div>
  </div>

  <div class="card attire-card">
    <img src="images/turkana.jpg" alt="Turkana Beadwork"/>
    <h3>Turkana Beadwork</h3>
    <p>Colorful beaded necklaces worn by Turkana women.</p>
    <button class="learn-more">Learn More</button>
    <button class="buy-now">Buy Now</button>
    <div class="details">
      <p>Turkana beadwork is not only decorative but also indicates status, age, and marital identity. 
      Necklaces are layered in bold colors, representing the desert lifestyle and resilience.</p>
    </div>
  </div>
</section>
      <!-- VIDEOS -->
      <section id="videos" class="section">
        <header class="section-head"><h2>Videos</h2><p>Cultural clips and performances ‚Äî click to open.</p></header>

        <div class="grid">
          <div class="card video">
            <div class="thumb" data-video="https://www.youtube.com/embed/x9H2L_9ZsM8">
              <img src="images/video-maasai-thumb.jpg" alt="Maasai Dance">
              <div class="play"><i class="fas fa-play"></i></div>
            </div>
            <h3>Maasai Dance</h3>
          </div>

          <div class="card video">
            <div class="thumb" data-video="https://www.youtube.com/embed/YkuqC9RzJNE">
              <img src="images/video-swahili-thumb.jpg" alt="Swahili Coast">
              <div class="play"><i class="fas fa-play"></i></div>
            </div>
            <h3>Swahili Culture</h3>
          </div>
        </div>
      </section>

      <!-- GAMES (placeholder) -->
      <section id="games" class="section">
        <header class="section-head"><h2>Games</h2><p>Learning through play: coming soon ‚Äî puzzles, quizzes & memory match.</p></header>
        <div class="grid">
          <div class="card"><h3>Puzzle</h3><p>Interactive image puzzle</p></div>
          <div class="card"><h3>Quiz</h3><p>Test your knowledge</p></div>
        </div>
      </section>
	  <section id="ai-generator" class="section">
 <section class="section" id="ai-generator">
  <div class="section-head">
    <h2>AI Art Generator</h2>
    <p>Describe what you want to see ‚Äî our AI will bring it to life inspired by African culture.</p>
  </div>

  <div class="ai-box">
    <input id="prompt-input" type="text" placeholder="e.g. Maasai warrior at sunrise in traditional attire" />
    <button id="generate-btn" class="btn">Generate Image</button>
  </div>

  <div class="generated-output">
    <div id="loading-text" style="display:none;">üé® Creating your artwork, please wait...</div>
    <img id="generated-image" alt="Generated AI art" style="display:none; border-radius:12px; margin-top:1rem; width:100%; max-width:600px;" />
  </div>
</section>
<script>
const generateBtn = document.getElementById("generate-btn");
const promptInput = document.getElementById("prompt-input");
const generatedImage = document.getElementById("generated-image");
const loadingText = document.getElementById("loading-text");

generateBtn.addEventListener("click", async () => {
  const prompt = promptInput.value.trim();
  if (!prompt) return alert("Please enter a prompt first!");

  generatedImage.style.display = "none";
  loadingText.style.display = "block";

  try {
    // Call your FastAPI server (make sure the URL matches your setup)
    const response = await fetch(`http://127.0.0.1:8000/generate?prompt=${encodeURIComponent(prompt)}`);

    if (!response.ok) throw new Error("Error generating image");

    // Convert response to blob (binary image)
    const blob = await response.blob();
    const imageURL = URL.createObjectURL(blob);

    // Display the generated image
    generatedImage.src = imageURL;
    generatedImage.style.display = "block";
  } catch (error) {
    alert("‚ö†Ô∏è " + error.message);
  } finally {
    loadingText.style.display = "none";
  }
});
</script>


      <!-- TEAM -->
      <section id="team" class="section">
        <header class="section-head"><h2>Team</h2><p>The people behind Lacultura.</p></header>
        <div class="grid">
          <div class="card"><img src="images/team1.jpg" alt=""><h3>Jerusha Ndanu</h3><p>Founder</p></div>
          <div class="card"><img src="images/team2.jpg" alt=""><h3>Solomon Teko</h3><p>Developer</p></div>
		   <div class="card"><img src="images/team1.jpg" alt=""><h3>Alice Ngugi</h3><p>Developer,  cultural researcher</p></div>
          <div class="card"><img src="images/team2.jpg" alt=""><h3>Fellista Serianae</h3><p>Developer, cultural researcher </p></div>
		   <div class="card"><img src="images/team1.jpg" alt=""><h3>Fred Kimpeei</h3><p>Developer, cultural researcher</p></div>
          
        </div>
      </section>

      <!-- DONATE -->
      <section id="donate" class="section">
        <header class="section-head"><h2>Support</h2><p>Help us preserve culture ‚Äî one donation supports storytellers and artisans.</p></header>
        <div class="grid">
          <div class="card">
            <p>Support Lacultura</p>
            <div class="actions"><button class="btn donate"><i class="fas fa-donate"></i> Donate</button></div>
          </div>
        </div>
      </section>

      <footer class="footer">
        <small>¬© 2025 Lacultura ‚Äî Celebrating Kenya</small>
      </footer>
    </main>
  </div>

  <!-- VIDEO MODAL -->
  <div id="video-modal" class="modal" aria-hidden="true">
    <div class="modal-inner">
      <button class="modal-close" id="video-close"><i class="fas fa-times"></i></button>
      <div class="video-wrap"><iframe id="video-iframe" src="" frameborder="0" allowfullscreen></iframe></div>
    </div>
  </div>

<!-- LOGIN MODAL -->
<div id="login-modal" class="modal" aria-hidden="true">
  <div class="modal-inner login-modal">
    <button class="modal-close" id="login-close"><i class="fas fa-times"></i></button>

    <div class="login-container">
      <h3 class="login-title">Welcome to <span class="accent">Lacultura</span></h3>
      <p class="login-sub">Login or create an account to personalize your experience</p>

      <div class="tabs">
        <button class="tab active" id="tab-login">Login</button>
        <button class="tab" id="tab-register">Register</button>
      </div>

      <!-- LOGIN FORM -->
      <div class="form-section" id="login-form">
        <input type="email" id="login-email" placeholder="Email" required />
        <input type="password" id="login-password" placeholder="Password" required />
        <button id="login-btn" class="btn full">Login</button>
      </div>
<div class="divider-line"><span>or</span></div>
<button id="google-btn" class="btn google full">
  <i class="fab fa-google"></i> Continue with Google
</button>

      <!-- REGISTER FORM -->
      <div class="form-section" id="register-form" style="display:none;">
        <input type="text" id="register-name" placeholder="Full Name" required />
        <input type="email" id="register-email" placeholder="Email" required />
        <input type="password" id="register-password" placeholder="Password" required />
        <button id="register-btn" class="btn full">Register</button>
      </div>

      <!-- PROFILE VIEW -->
      <div id="profile-view" style="display:none;">
        <p class="welcome">üëãüèæ Hello, <strong id="view-name"></strong></p>
        <button id="logout-btn" class="btn ghost full">Logout</button>
      </div>
    </div>
  </div>
</div>


<script type="module">
  // üî• Import Firebase SDKs
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
  import {
    getAuth,
    createUserWithEmailAndPassword,
    signInWithEmailAndPassword,
    signOut,
    onAuthStateChanged,
    updateProfile,
    GoogleAuthProvider,
    signInWithPopup
  } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-analytics.js";

  // ‚öôÔ∏è Your Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyDuymdaY-TxltRrF3NuY9kP-TuGJJg3kQE",
    authDomain: "lacultura-ba185.firebaseapp.com",
    projectId: "lacultura-ba185",
    storageBucket: "lacultura-ba185.firebasestorage.app",
    messagingSenderId: "1032413671701",
    appId: "1:1032413671701:web:211519ca54f89c5e01f91c",
    measurementId: "G-7GB7Y2FYD6"
  };

  // üî• Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const auth = getAuth(app);
  const provider = new GoogleAuthProvider();

  // üéØ Elements
  const loginBtn = document.getElementById("login-btn");
  const registerBtn = document.getElementById("register-btn");
  const logoutBtn = document.getElementById("logout-btn");
  const googleBtn = document.getElementById("google-btn");
  const viewName = document.getElementById("view-name");
  const loginForm = document.getElementById("login-form");
  const registerForm = document.getElementById("register-form");
  const profileView = document.getElementById("profile-view");

  // üßæ Register user with email & password
  registerBtn?.addEventListener("click", async () => {
    const name = document.getElementById("register-name").value.trim();
    const email = document.getElementById("register-email").value.trim();
    const password = document.getElementById("register-password").value.trim();

    if (!name || !email || !password) return alert("‚ö†Ô∏è Please fill in all fields");
    if (password.length < 6) return alert("üîí Password must be at least 6 characters long");

    try {
      const userCredential = await createUserWithEmailAndPassword(auth, email, password);
      await updateProfile(userCredential.user, { displayName: name });
      alert("üéâ Registration successful!");
    } catch (error) {
      alert("‚ùå " + error.message);
    }
  });

  // üîê Login with email & password
  loginBtn?.addEventListener("click", async () => {
    const email = document.getElementById("login-email").value.trim();
    const password = document.getElementById("login-password").value.trim();
    if (!email || !password) return alert("‚ö†Ô∏è Enter both email and password");

    try {
      await signInWithEmailAndPassword(auth, email, password);
      alert("‚úÖ Logged in successfully!");
    } catch (error) {
      alert("‚ùå " + error.message);
    }
  });

  // üåç Login with Google
  googleBtn?.addEventListener("click", async () => {
    try {
      const result = await signInWithPopup(auth, provider);
      const user = result.user;
      alert(`üëãüèæ Welcome ${user.displayName}!`);
      console.log("Google User:", user);
    } catch (error) {
      alert("‚ùå " + error.message);
      console.error(error);
    }
  });

  // üö™ Logout
  logoutBtn?.addEventListener("click", async () => {
    await signOut(auth);
    alert("üëãüèæ Logged out successfully!");
  });

  // üëÅÔ∏è Handle login state changes
  onAuthStateChanged(auth, (user) => {
    if (user) {
      // Show profile view
      profileView.style.display = "block";
      loginForm.style.display = "none";
      registerForm.style.display = "none";

      // Display user info
      viewName.textContent = user.displayName || user.email;
      console.log("User logged in:", user);
    } else {
      // Show login form
      profileView.style.display = "none";
      loginForm.style.display = "block";
      registerForm.style.display = "none";
    }
  });
</script>



  <!-- Inline decorative SVGs for dividers (multi-color support via CSS) -->
  <svg style="display:none;">
    <defs>
      <linearGradient id="g-orange-green" x1="0" x2="1">
        <stop offset="0" stop-color="#FF7F00"/>
        <stop offset="1" stop-color="#009444"/>
      </linearGradient>
    </defs>
  </svg>

  <!-- MAIN SCRIPT -->
  <script src="script.js"></script>
</body>
</html>
